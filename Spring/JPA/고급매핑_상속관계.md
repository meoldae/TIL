# 고급 매핑

### 상속관계 매핑
RDB에는 상속관계가 존재하지 않는다.   
그러나 슈퍼타입, 서브타입 관계가 객체 상속과 유사하여 객체의 상속과 DB의 슈퍼타입, 서브타입 관계를 매핑할 수 있다.
- 클래스에 ```@Inheritance(strategy = InheritanceType.XXX)``` 어노테이션 속성을 통해 전략 선택 가능 
- 조인 전략(JOINED) : 각자 테이블을 만들고 데이터를 함께 가져올 때 조인을 통해서 가져오는 것
    - ```@DiscriminatorColumn(name = "XXX")``` : DTYPE 컬럼이 생기고 엔티티명이 디폴트 값으로 들어감
    - ```@DiscriminatorValue("value")``` : DTYPE에 클래스명이 아니라 임의의 값 지정 가능
    - 장점
        - 외래키 무결성 제약조건 적용 가능
    - 단점 
        - 조회시 조인 많음.. 성능 저하
        - 쿼리도 복잡함
        - 저장 시 INSERT구문 2회 호출됨
- 단일 테이블 전략(SINGLE_TABLE) : 한 테이블에 속성 다 때려박는 방법.. (JPA 기본값)
    - 프로젝트가 단순할 때 사용하고 DTYPE으로만 구분함
    - 장점 
        - 조인 필요 없으니 속도가 빠름
        - 쿼리 단순
    - 단점 
        - 어느 하위 클래스인지 모르므로 속성에 null값이 허용됨
        - 테이블이 매우 비대해져 오히려 성능이 저하될 수도 있음
- 클래스 마다 테이블 전략(TABLE_PER_CLASS) : 각각의 테이블을 모두 구현하는 전략
    - 상위 클래스 테이블은 생성되지 않음
    - 조회할 때 부모클래스로 조회하려면 모든 하위 테이블 다 탐색 => 비효율
    - 쓰면 안되는 전략?? => 하위 클래스들을 묶어서 기능을 써야할 때 새로운 테이블이 추가되면 코드 수정 소요가 매우 커짐

