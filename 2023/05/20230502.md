# HTTP (Hyper Text Transfer Protocol)

## HTTP/0.9 
표준 이전의 HTTP 버전으로 문서화된 최초의 HTTP 버전   
단순한 Client-Server 구조였던 초기 웹은 단순히 HTML을 요청하고 전송하는 것이 전부였다.
그리고 HTTP는 TCP/IP 프로토콜 위에서 작동했기때문에 최적화 설정들을 신경쓰지 않았다.

요청 메소드는 `GET` 단 하나에 `헤더`, `상태코드`도 존재하지 않았다.
- 요청
    ```
    GET /page.html
    ```
- 응답
    ```
    <HTML>
        My Page...
    </HTML>
    ```
이후 웹 사용자의 증가에 따라 요구사항을 충족시키기 위해 브라우저들은 각자 여러 기능들을 추가하였다.   
하지만 약속된 표준이 없어 원활하게 통신이 이루어지지 않았고,   
이러한 사양들을 정의하여 발표한 것이 `HTTP/1.0`이다.
> HTTP0.9인 이유? -> HTTP 1.0과 구분을 위해 최초의 버전에 0.9라는 이름을 붙임

## HTTP/1.0
HTTP/1.0에서 변경된 사항
- 버전 정보의 명시   
    - Request와 Response 사이에 버전 정보가 명시되었다.
- 요청 메소드의 확장 
    - `GET`, `HEAD`, `POST` 세 가지로 확장되었다.
- 상태 코드의 추가
- 메타데이터를 담는 `헤더`의 추가
    - 헤더의 `Content-Type`으로 `HTML` 이외의 파일을 전송할 수 있게 되었다.
- 요청
    ```
    GET /page.html HTTP/1.0
    User-Agent: NCSA_Mosaic/2.0(Windows 3.1)
    ```
- 응답
    ```
    200 OK
    Date: Tue, 15 Nov 1994 08:12:31 GMT
    Server: CERN/3.0 libwww/2.17
    Content-Type: text/html
    <HTML>
        My Page...
        <Img src="/img.jpeg">
    </HTML>
    ```

## HTTP/1.1
HTTP/1.0의 설계에서의 다음과 같은 불완전한 부분들을 보완하고자 추가되었다.
- 계층적 프록시
- 캐싱
- 연결 지속성

### 연결 상태 유지(Persisted connection)
HTTP/1.0에서는 Response가 수신되면 곧바로 TCP 연결을 종료한다.     
웹 페이지가 복잡해지면서 다수의 요청이 발생할 때마다 TCP 연결(3Way-Handshake) 과정을 거쳐야 해서 속도가 매우 느려졌다.   

그래서 HTTP/1.1에서는 사용했던 TCP 연결을 재사용하도록 했다. 연결하고 종료하는 과정에서 시간이 줄어들긴 하지만 연결이 계속된다면 서버에 부하가 생기게 되므로 시간을 정해놨으며 이를 `Keep-Alive`라고 칭한다.

<img height=500px width=500px src="https://user-images.githubusercontent.com/70866410/235617941-6faa1f07-e400-49e5-a58d-a7b46b0d38a4.png">

### 파이프 라인(Pipe-lining)
파이프라이닝이란, 클라이언트가 서버에게 여러 요청을 보낼 때 요청에 대한 응답을 기다리는 것이 아니라 발생한 요청을 모두 전송하는 방식이다.   
기존 방식은 여러 요청이 발생하면 먼저 `(1)`발생한 요청을 보내고 `(2)`그에 대한 응답을 받고 `(3)`다음 요청을 보낸다.   
이 경우 앞선 요청의 시간에 따라 이후 요청의 지연이 발생할 수 있었다.

그래서 HTTP/1.1에서는 파이프라이닝을 이용해 여러 요청을 보내면 서버는 받은 순서대로 응답하며 지연을 줄이도록 했다.   
❗❗이 때 가장 중요한 것은 요청별 응답을 위해 순서를 엄격히 지켜야 한다.

이 외에도 HTML을 분할하는 `청크 전송 인코딩(Chunked Transfer Encoding)`이나, 요청에 대한 메타 정보를 담는 `캐시 제어`, 동일 IP에 여러 도메인을 호스팅할 수 있는 `호스트`등의 기능이 추가되었습니다.
